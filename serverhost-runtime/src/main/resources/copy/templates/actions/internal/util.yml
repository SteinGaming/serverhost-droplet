init-placeholders:
  - key: "software"
    field: "$.server-software"
    lowercase: true
    type: "infer"
  - key: "group"
    field: "group"
    type: "infer"
  - key: "numerical-id"
    field: "numericalId"
    type: "infer"
  - key: "server"
    value: "%group%-%numerical-id%"
    type: "placeholder"

copy:
  - from: "%templates%/%group%"
    to: "%server-dir%"
    replace: false
    type: "copy"

static-dir:
  - key: "server-dir"
    value: "%running%/static/%group%/%server%"
    type: "placeholder"

every:
  - from: "%templates%/every"
    to: "%server-dir%"
    replace: false
    type: "copy"

every-typed:
  - ref: every
  - from: "%templates%/every_%software%"
    to: "%server-dir%"
    replace: false
    type: "copy"